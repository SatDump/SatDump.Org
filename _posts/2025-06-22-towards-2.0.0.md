---
layout: post
title:  "Towards 2.0.0 (finally!?)"
date:   2027-06-22 14:59:59 +0200
tags:   release
authors: [Aang23, lego11]
---

# Introduction

It's been a while since the last release, especially right after 1.2.2 where we said we would instead pace things up on releases (especially with most people using nightly builds nowadays), so what happened?

## Some SatDump History

To explain what happened, it's useful to first remember the history of SatDump as a project especially since the userbase has changed a lot since those early times.

*Do note that this of course is heavily summarized.*

Back around 2019, I (Aang23 F4LAU) wanted to get into HRPT, especially newer satellites such as MetOp (and later FengYun). Since pretty much nothing was available at the time, I ended up attempting to write them myself and thanks to Martin Blaho's old work & others, ended up publishing an initial MetOp decoder soon followed by a FengYun-3 decoder ([https://github.com/altillimity/L-Band-Decoder]()).  
From there, I also slowly added decoders for the instruments (imagers, etc). Zbychu SP5EWS also joined the project at the time by contributing an HIRS decoder. Things only carried on with X-Band decoders ([https://github.com/altillimity/X-Band-Decoders]()) and S-Band decoders ([https://github.com/altillimity/S-Band-Decoders]()) as well as a few more such as GVAR, S-VISSR... All that to say that after a while, those little decoders had grown to a pretty large set of tools.

![0.0.1](/assets/towards_200/001.png)
*The first public SatDump version, 0.0.1*


Around the same time (and potentially helped by the availability of decoders), the satellite reception hobby grew quite a bit and attracted more and more users wanting something less cumbersome to utilize. Many suggested packaging them together into something nicer - and that's how the SatDump project really started. The first version was really just all the old tools packages into one thing that simply ran them one after the other with an added GUI.

Over time, more and more features were added such as projections, calibration for some instruments, far more satellites... And it kinda got messy. Working on the codebase around 0.0.39 was painful, and it was clear there had been more than one massive design mistakes made initially in large due to not really grasping what would really be needed for further processing and features at first.

![0.0.38](/assets/towards_200/0038.png)
*SatDump 0.0.38*

That's why back then Zbychu & I ended up stopping development on master for a while in order to work on what 1.0.0 would become. This involved several months of work to introduce the concept of "products" to store instrument data, the viewer to allow processing them in a much more user-friendly way, a new recorder...

And from then on, that's what every 1.x.x release has been based on. Of course things changed a lot since, but the core is still similar (and in fact, most code for 1.0.0 could still function in 1.2.2). It's also worth pointing out that while 1.0.0 introduced pretty important new concepts, it wasn't a deep rewrite either and downside of legacy 0.0.39 codes still prevails in some situations.

Therefore, as you might have guessed already... There we go again! :-)
Things in 1.2.3 were really starting to show their limits and actively preventing really going forward. Another (stupid) issue was a plain lack of documentation, leading more than once to breaking something *pretty badly* entirely by mistake due to a lack of understanding of what code dating back from the first decoders cited here did... Yes, kinda sucks.

So yes, it turns out development never stopped but has rather been focused on another large rewrite meant to finally fix design mistakes and completely overhaul several parts of SatDump (featuring ***Documentation!!!!!***).

## What is it about?

*This is more meant to be an overview of the changes rather than a complete description, both because it's near impossible to list them all and because most of it is covered in the documentation already*

### Product System

At first glance the concept stays identical. It's still one instrument per product and a concept of dataset to group them together.
However, under the hood things were heavily changes and especially simplified.

**Alignment / Projections :**  
First of all, a product can now *only* store channels with a single projection configuration, shared between all of them. Channels also must be correlated between them by predefined functions (affine transforms or more arbitrary options). That honestly doesn't change much for the user except the ability to align channels that need more complex transformations (such as a rotation or non-linear transform for the VIIRS DNB channel) to be aligned, and forcing instruments that cannot be correlated such as ASCAT to be split.

![Meteor KMSS](/assets/towards_200/KMSS.jpg)
*Channel alignment on Meteor-M NÂ°2-4 KMSS*

**Calibration :**  
The old system was rather inflexible, it only allowed 2 hardcoded units : Either albedo, or radiance. Conversions were hardcoded making it near-impossible to really add any other unit and such. Plus, sometimes it was required to calculate other types of variables from the data such as the sun elevation for each pixel.
Hence, the new system made that fully generic. There are still default units for common cases, but channels can be calibrated in any that may be needed. Additionally, converting between units is done via "converters" that can be added as needed.
Those changes also allow using more than one unit from the same channel in the same expression.

![Sun angle compensated NOAA 15](/assets/towards_200/king1.png)
*Sun-angle compensated, reflective radiance calibrated imagery from NOAA 15*

### GUI Changes - No more tabs & Explorer (previously - Viewer) changes

Alongside the product rework, the entire concept of the viewer was reworked as well. Previously, it was limited to only loading datasets and products, and would only allow performing a single projection at a time. That worked in most cases, but it was pretty limited and horribly specific, as all automatic and GUI processing code was also separate.

The idea this time around was to go with something more similar to most GIS programs or file explorers, that is a tree viewer with elements (a dataset?) and sub-elements (products?). 

Therefore now the viewer's base isn't actually specific at all anymore. All it does is display handlers, and allow dragging them around into one another. That simple concept allows handling anything from a dataset containing several products, to a projection containing several layers and overlays... And far, far more things. It also makes for a nice place to include smaller tools (such as the WIP Binary viewer, the LUT editor) in a less intrusive way. This is in large why it has also been renamed to `Explorer`, to better reflect the wider role it now plays.

![2.0.0 Explorer](/assets/towards_200/200.png)
*Welcome screen from SatDump 2.0.0*

It also turned out that this new approach was so versatile that it could actually replace the entire GUI. Therefore now, everything from running pipelines to recorders are added as "handlers" on the left panel.   
This has a few important benefits :
- Adding multiple recorders, or running several pipelines at once is trivial,
- It doesn't require loading up everything even if the user won't use it (especially the recorder), which allows SatDump to not only keep a lower footprint but also load a lot faster,
- As nothing is hardcoded in the GUI anymore (outside of essentials), it'll be a lot easier to maintain (and this has already shown!).

![2.0.0 Explorer with stuff](/assets/towards_200/200_exp.png)
*An in-use session of SatDump 2.0.0*

Therefore, things moved around a bit in the GUI. Offline processing (now just Processing) is now in the top-level menu, just like the official products loader.

Another major aspect is the introduction of dataset-wide processing via scripts (and potentially flowgraphs as well) to allow doing multi-instrument composites and much more.

### Explorer (previously - Viewer) & Product processing DELETE

Alongside the product rework, the entire concept of the viewer was reworked as well. Previously, it was limited to only loading datasets and products, and would only allow performing a single projection at a time. That worked in most cases, but it was pretty limited and horribly specific, as all automatic and GUI processing code was also separate.

The idea this time around was to go with something more similar to most GIS programs or file explorers, that is a tree viewer with elements (a dataset?) and sub-elements (products?). 

Therefore now the viewer's base isn't actually specific at all anymore. All it does is display handlers, and allow dragging them around into one another. That simple concept allows handling anything from a dataset containing several products, to a projection containing several layers and overlays... And far, far more things. It also makes for a nice place to include smaller tools (such as the WIP Binary viewer, the LUT editor) in a less intrusive way. This is in large why it has also been renamed to `Explorer`, to better reflect the wider role it now plays.

[IMAGE]

Additionally, said handlers are using exactly the same code in order to do things in the GUI and with automatic processing making it far easier to maintain.

Another major aspect is the introduction of dataset-wide processing via scripts (and potentially flowgraphs as well) to allow doing multi-instrument composites and much more.

### Pipeline format

The pipeline format had not changed nearly at all since the first commit of SatDump. It allowed doing a lot more than was ever actually used leading to pretty convoluted configuration. As an example, each pipeline step would allow for running several modules... All that to say, it's a lot simpler now.

![POES Pipeline](/assets/towards_200/poes_pipeline.png)
*A sample pipeline file, here for the POES constellation*

### Composite rework

Early on, SatDump distinguished itself from other software by offering a wide variety of RGB composite imagery. However, the early approach had some drawbacks, namely that the input images weren't calibrated at all and that most of the composites were tuned for the normal imagery that the author was receiving. 
This became a problem when SatDump started growing outside of Western and Eastern Europe, as most composites tended to "break" in unexpected ways when exposed to a different morphology such as when a significant portion of the image is occupied by the Sahara Desert.

![Bad composites](/assets/towards_200/badComposites.png)
*Examples of a composite breaking as the land in the image gets progressively more arid*

With the introduction of calibrated imagery, the infrared portion got an in-depth overhaul with many useful composites and products such as Cloud Top IR, Night Microphysics and more. However, the daytime composites using mostly visible were not really touched up more than strictly necessary, given that for most people they were not a problem. Mostly, the White Balance and Equalize features were heavily used to correct most of the glaring issues, when they were present.

With sun compensated calibration now available as well as a general push forward to use SatDump in a more professional environement, it was clear this approach was far from ideal, therefore most composites were redone to be calibrated in an absolute fashion and not depend anymore on features such as White Balance whose output is unpredictable with respect to the input.

![Good composites](/assets/towards_200/goodComposites.png)
*Composites calibrated against absolute values*

Additionally, most of the composites used in operational meteorology were thoroughly checked and validated against primary sources, to ensure they perform adequately.

### LUT Generator

To help with the creation of new composites, a LUT Generator was added into SatDump that is similar to the *Color Table* tool in McIDAS. It is designed to be used to easily create look-up tables, display them on a sample image, and save the result to a file for later use into the Expression Editor.

![LUT Generator](/assets/towards_200/lut_editor.png)
*The LUT Generator working on a Suomi NPP image*

## Other work-in-progress changes


## Planned release "schedule"

By design sure a large rework will make the software absolutely unusable for a little while, therefore all the work had to be performed on another branch in the meantime. However, it can't last forever and has to be merged back in master at some point.

The way we decided to do it was to keep it separate until the bulk of the rework that would impact the user most & break compatibility the most was done, and from there start releasing `alpha` releases until the full thing is done to finally release 2.0.0.

â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸  
***As those `alpha` 2.0.0 releases are both breaking compatibility and potentially more unstable, you should NOT update from 1.2.3 if you expect things to be reliable - or do testing on your end first. Also make sure to read this article in full to understand the changes that may affect your usecase.***  
â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸â ï¸

Therefore, without any specific timeline here's what to expect :
- A merge of the rework (branch `verywip`) into master,
- For at least a few months, relatively frequent alpha releases (as nightly builds),
- Whenever things are done, a proper 2.0.0 release.

# Changes

## VIIRS DNB Channel back into the main VIIRS Product

VIIRS, unlike most instrument has channels that are not downlinked in a linear fashion. This means that normal channels (Imagery / Moderate) could not be merged together with DNB in order to do composites without first re-projecting everything. Therefore, to allow projections it had been split into another product entirely.

Thanks to SatDump's new composite system now allowing more or less arbitrary transforms between instrument channels, it is now possible to have it back with the rest of the channels and do composites with it. SatDump will automatically correlate the channels together.

[IMAGE]

## MSU-MR Visible Calibration

In a previous release, METEOR-M's MSU-MR instrument had already seen the addition of calibration on its infrared channels. Visible had been left uncalibrated. Fortunately, since it turned out to be relatively simple & stable, calibration could be added based on official data provided by Planeta.

MSU-MR is now fully calibrated.

[IMAGE]

## Initial SSTV Support

Following a large amount of requests, an initial (and still experimental) SSTV decoder was added to SatDump to cover transmissions such as the ISS' PD120, FRAM2's Robot36 and so on. Feedback is appreciated to test this further.

[IMAGE]

## GK-2A UHRIT Support

Thanks to data provided by John Bell, Drew (@pluggerlocker) and Aybar/Serge, full support for GK-2A was added to SatDump. This includes demodulation and all processing down to calibrated images.

[IMAGE]

## ELEKTRO-L (MSU-GS) LRIT/HRIT Calibration

Until now, ELEKTRO-L HRIT/LRIT was supported but did not allow for calibrating received images. Thanks to more general work on xRIT file processing as described earlier, this is now possible (note : LRIT is not sent with calibration data on ELEKTRO).

[IMAGE]

## MSG (SEVIRI) LRIT/HRIT Support

Support for loading & processing SEVIRI LRIT/HRIT files was added. While the downlinks themselves are not active anymore, those files are still broadcast on EUMETCast.

[IMAGE]

## FengYun-2 / Fengyun-3

While this is still considered experimental and some features are missing, it is now possible to load FengYun-2 and FengYun-3 HDF5 files in SatDump.

[IMAGES]

# Bugs fixed

*Too many to even begin trying to fill that section...*
